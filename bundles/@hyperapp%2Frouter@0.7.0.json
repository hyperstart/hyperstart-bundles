{"name":"@hyperapp/router","version":"0.7.0","packages":{"@hyperapp/router":{"0.7.0":{"json":{"name":"@hyperapp/router","description":"Declarative routing for Hyperapp using the History API.","version":"0.7.0","main":"dist/router.js","module":"src/index.js","license":"MIT","repository":"hyperapp/router","files":["src","dist"],"author":"Jorge Bucaran","keywords":["hyperapp","router","navigation","history"],"scripts":{"test":"jest --coverage --no-cache","build":"npm run bundle && npm run minify","bundle":"rollup -i src/index.js -o dist/router.js -f umd -mn hyperappRouter -g hyperapp:hyperapp","minify":"uglifyjs dist/router.js -o dist/router.js -mc pure_funcs=['Object.defineProperty'] --source-map includeSources,url=router.js.map","prepublish":"npm run build","format":"prettier --semi false --write '{src,test}/**/*.js'","release":"npm run build && npm test && git commit -am $npm_package_version && git tag $npm_package_version && git push && git push --tags && npm publish"},"babel":{"presets":["env"],"plugins":[["transform-react-jsx",{"pragma":"h"}]]},"jest":{"testURL":"http://localhost"},"devDependencies":{"babel-jest":"^22.4.3","babel-plugin-transform-react-jsx":"^6.24.1","babel-preset-env":"^1.6.1","hyperapp":"^1.2.5","jest":"^22.4.3","prettier":"^1.11.1","rollup":"^0.57.1","uglify-js":"^3.3.16"},"peerDependencies":{"hyperapp":"1.2.5"}},"mainFile":"src/index.js","files":{"/package.json":"{\n  \"name\": \"@hyperapp/router\",\n  \"description\": \"Declarative routing for Hyperapp using the History API.\",\n  \"version\": \"0.7.0\",\n  \"main\": \"dist/router.js\",\n  \"module\": \"src/index.js\",\n  \"license\": \"MIT\",\n  \"repository\": \"hyperapp/router\",\n  \"files\": [\n    \"src\",\n    \"dist\"\n  ],\n  \"author\": \"Jorge Bucaran\",\n  \"keywords\": [\n    \"hyperapp\",\n    \"router\",\n    \"navigation\",\n    \"history\"\n  ],\n  \"scripts\": {\n    \"test\": \"jest --coverage --no-cache\",\n    \"build\": \"npm run bundle && npm run minify\",\n    \"bundle\": \"rollup -i src/index.js -o dist/router.js -f umd -mn hyperappRouter -g hyperapp:hyperapp\",\n    \"minify\": \"uglifyjs dist/router.js -o dist/router.js -mc pure_funcs=['Object.defineProperty'] --source-map includeSources,url=router.js.map\",\n    \"prepublish\": \"npm run build\",\n    \"format\": \"prettier --semi false --write '{src,test}/**/*.js'\",\n    \"release\": \"npm run build && npm test && git commit -am $npm_package_version && git tag $npm_package_version && git push && git push --tags && npm publish\"\n  },\n  \"babel\": {\n    \"presets\": [\n      \"env\"\n    ],\n    \"plugins\": [\n      [\n        \"transform-react-jsx\",\n        {\n          \"pragma\": \"h\"\n        }\n      ]\n    ]\n  },\n  \"jest\": {\n    \"testURL\": \"http://localhost\"\n  },\n  \"devDependencies\": {\n    \"babel-jest\": \"^22.4.3\",\n    \"babel-plugin-transform-react-jsx\": \"^6.24.1\",\n    \"babel-preset-env\": \"^1.6.1\",\n    \"hyperapp\": \"^1.2.5\",\n    \"jest\": \"^22.4.3\",\n    \"prettier\": \"^1.11.1\",\n    \"rollup\": \"^0.57.1\",\n    \"uglify-js\": \"^3.3.16\"\n  },\n  \"peerDependencies\": {\n    \"hyperapp\": \"1.2.5\"\n  }\n}\n","/README.md":"# Hyperapp Router\n\n[![Travis CI](https://img.shields.io/travis/hyperapp/router/master.svg)](https://travis-ci.org/hyperapp/router) [![Codecov](https://img.shields.io/codecov/c/github/hyperapp/router/master.svg)](https://codecov.io/gh/hyperapp/router) [![npm](https://img.shields.io/npm/v/@hyperapp/router.svg)](https://www.npmjs.org/package/hyperapp) [![Slack](https://hyperappjs.herokuapp.com/badge.svg)](https://hyperappjs.herokuapp.com \"Join us\")\n\nHyperapp Router provides declarative routing for [Hyperapp](https://github.com/hyperapp/hyperapp) using the [History API](https://developer.mozilla.org/en-US/docs/Web/API/History).\n\n[Try this example online](http://hyperapp-router.surge.sh).\n\n```jsx\nimport { h, app } from \"hyperapp\"\nimport { Link, Route, location } from \"@hyperapp/router\"\n\nconst Home = () => <h2>Home</h2>\nconst About = () => <h2>About</h2>\nconst Topic = ({ match }) => <h3>{match.params.topicId}</h3>\nconst TopicsView = ({ match }) => (\n  <div key=\"topics\">\n    <h2>Topics</h2>\n    <ul>\n      <li>\n        <Link to={`${match.url}/components`}>Components</Link>\n      </li>\n      <li>\n        <Link to={`${match.url}/single-state-tree`}>Single State Tree</Link>\n      </li>\n      <li>\n        <Link to={`${match.url}/routing`}>Routing</Link>\n      </li>\n    </ul>\n\n    {match.isExact && <h3>Please select a topic.</h3>}\n\n    <Route parent path={`${match.path}/:topicId`} render={Topic} />\n  </div>\n)\n\nconst state = {\n  location: location.state\n}\n\nconst actions = {\n  location: location.actions\n}\n\nconst view = state => (\n  <div>\n    <ul>\n      <li>\n        <Link to=\"/\">Home</Link>\n      </li>\n      <li>\n        <Link to=\"/about\">About</Link>\n      </li>\n      <li>\n        <Link to=\"/topics\">Topics</Link>\n      </li>\n    </ul>\n\n    <hr />\n\n    <Route path=\"/\" render={Home} />\n    <Route path=\"/about\" render={About} />\n    <Route parent path=\"/topics\" render={TopicsView} />\n  </div>\n)\n\nconst main = app(state, actions, view, document.body)\n\nconst unsubscribe = location.subscribe(main.location)\n```\n\n## Installation\n\n<pre>\nnpm i <a href=\"https://www.npmjs.com/package/@hyperapp/router\">@hyperapp/router</a>\n</pre>\n\nThen with a module bundler like Rollup or Webpack, use as you would anything else.\n\n```jsx\nimport { Link, Route, Switch, Redirect, location } from \"@hyperapp/router\"\n```\n\nIf you don't want to set up a build environment, you can download Hyperapp Router from a CDN like [unpkg.com](https://unpkg.com/@hyperapp/router) and it will be globally available through the <samp>window.hyperappRouter</samp> object. We support all ES5-compliant browsers, including Internet Explorer 10 and above.\n\n## Usage\n\nAdd the `location` module to your state and actions and start the application.\n\n```jsx\nconst state = {\n  location: location.state\n}\n\nconst actions = {\n  location: location.actions\n}\n\nconst main = app(\n  state,\n  actions,\n  (state, actions) => <Route render={() => <h1>Hello!</h1>} />,\n  document.body\n)\n```\n\nThen call `subscribe` to listen to location change events.\n\n```js\nconst unsubscribe = location.subscribe(main.location)\n```\n\n## Components\n\n### Route\n\nRender a component when the given path matches the current [window location](https://developer.mozilla.org/en-US/docs/Web/API/Location). A route without a path is always a match. Routes can have nested routes.\n\n```jsx\n<Route path=\"/\" render={Home} />\n<Route path=\"/about\" render={About} />\n<Route parent path=\"/topics\" render={TopicsView} />\n```\n\n#### parent\n\nThe route contains child routes.\n\n#### path\n\nThe path to match against the current location.\n\n#### render\n\nThe component to render when there is a match.\n\n### Render Props\n\nRendered components are passed the following props.\n\n```jsx\nconst RouteInfo = ({ location, match }) => (\n  <div>\n    <h3>Url: {match.url}</h3>\n    <h3>Path: {match.path}</h3>\n    <ul>\n      {Object.keys(match.params).map(key => (\n        <li>\n          {key}: {match.params[key]}\n        </li>\n      ))}\n    </ul>\n    <h3>Location: {location.pathname}</h3>\n  </div>\n)\n```\n\n#### location\n\nThe [window location](https://developer.mozilla.org/en-US/docs/Web/API/Location).\n\n#### match.url\n\nThe matched part of the url. Use to assemble links inside routes. See [Link](#link).\n\n#### match.path\n\nThe route [path](#path).\n\n#### match.isExact\n\nIndicates whether the given path matched the url exactly or not.\n\n### Link\n\nUse the Link component to update the current [window location](https://developer.mozilla.org/en-US/docs/Web/API/Location) and navigate between views without a page reload. The new location will be pushed to the history stack using `history.pushState`.\n\n```jsx\nconst Navigation = (\n  <ul>\n    <li>\n      <Link to=\"/\">Home</Link>\n    </li>\n    <li>\n      <Link to=\"/about\">About</Link>\n    </li>\n    <li>\n      <Link to=\"/topics\">Topics</Link>\n    </li>\n  </ul>\n)\n```\n\n#### to\n\nThe link's destination url.\n\n### Redirect\n\nUse the Redirect component to navigate to a new location. The new location will override the current location in the history stack using `history.replaceState`.\n\n```jsx\nconst Login = ({ from, login, redirectToReferrer }) => props => {\n  if (redirectToReferrer) {\n    return <Redirect to={from} />\n  }\n\n  return (\n    <div>\n      <p>You must log in to view the page at {from}.</p>\n      <button\n        onclick={() => {\n          auth.authenticate(userId => login(userId))\n        }}\n      >\n        Log in\n      </button>\n    </div>\n  )\n}\n```\n\n#### to\n\nThe redirect's destination url.\n\n#### from\n\nOverwrite the previous pathname. See [location.previous](#previous).\n\n### Switch\n\nUse the Switch component when you want to ensure only one out of several routes is rendered. It always renders the first matching child.\n\n```jsx\nconst NoMatchExample = (\n  <Switch>\n    <Route path=\"/\" render={Home} />\n    <Route\n      path=\"/old-match\"\n      render={() => <Redirect from=\"/old-match\" to=\"/will-match\" />}\n    />\n    <Route path=\"/will-match\" render={WillMatch} />\n    <Route render={NoMatch} />\n  </Switch>\n)\n```\n\n## Modules\n\n### location\n\n#### pathname\n\nSame as window.location.pathname.\n\n#### previous\n\nThe previous location.pathname. Useful when redirecting back to the referrer url/pathname after leaving a protected route.\n\n#### go(url)\n\nNavigate to the given url.\n\n## License\n\nHyperapp Router is MIT licensed. See [LICENSE](LICENSE.md).\n","/src/index.js":"export { Link } from \"./Link\"\nexport { Route } from \"./Route\"\nexport { Switch } from \"./Switch\"\nexport { Redirect } from \"./Redirect\"\nexport { location } from \"./location\"\n","/src/Link.js":"import { h } from \"hyperapp\"\n\nfunction getOrigin(loc) {\n  return loc.protocol + \"//\" + loc.hostname + (loc.port ? \":\" + loc.port : \"\")\n}\n\nfunction isExternal(anchorElement) {\n  // Location.origin and HTMLAnchorElement.origin are not\n  // supported by IE and Safari.\n  return getOrigin(location) !== getOrigin(anchorElement)\n}\n\nexport function Link(props, children) {\n  return function(state, actions) {\n    var to = props.to\n    var location = state.location\n    var onclick = props.onclick\n    delete props.to\n    delete props.location\n\n    props.href = to\n    props.onclick = function(e) {\n      if (onclick) {\n        onclick(e)\n      }\n      if (\n        e.defaultPrevented ||\n        e.button !== 0 ||\n        e.altKey ||\n        e.metaKey ||\n        e.ctrlKey ||\n        e.shiftKey ||\n        props.target === \"_blank\" ||\n        isExternal(e.currentTarget)\n      ) {\n      } else {\n        e.preventDefault()\n\n        if (to !== location.pathname) {\n          history.pushState(location.pathname, \"\", to)\n        }\n      }\n    }\n\n    return h(\"a\", props, children)\n  }\n}\n","/src/Route.js":"import { parseRoute } from \"./parseRoute\"\n\nexport function Route(props) {\n  return function(state, actions) {\n    var location = state.location\n    var match = parseRoute(props.path, location.pathname, {\n      exact: !props.parent\n    })\n\n    return (\n      match &&\n      props.render({\n        match: match,\n        location: location\n      })\n    )\n  }\n}\n","/src/Switch.js":"export function Switch(props, children) {\n  return function(state, actions) {\n    var child,\n      i = 0\n    while (\n      !(child = children[i] && children[i](state, actions)) &&\n      i < children.length\n    )\n      i++\n    return child\n  }\n}\n","/src/Redirect.js":"export function Redirect(props) {\n  return function(state, actions) {\n    var location = state.location\n    history.replaceState(props.from || location.pathname, \"\", props.to)\n  }\n}\n","/src/location.js":"function wrapHistory(keys) {\n  return keys.reduce(function(next, key) {\n    var fn = history[key]\n\n    history[key] = function(data, title, url) {\n      fn.call(this, data, title, url)\n      dispatchEvent(new CustomEvent(\"pushstate\", { detail: data }))\n    }\n\n    return function() {\n      history[key] = fn\n      next && next()\n    }\n  }, null)\n}\n\nexport var location = {\n  state: {\n    pathname: window.location.pathname,\n    previous: window.location.pathname\n  },\n  actions: {\n    go: function(pathname) {\n      history.pushState(null, \"\", pathname)\n    },\n    set: function(data) {\n      return data\n    }\n  },\n  subscribe: function(actions) {\n    function handleLocationChange(e) {\n      actions.set({\n        pathname: window.location.pathname,\n        previous: e.detail\n          ? (window.location.previous = e.detail)\n          : window.location.previous\n      })\n    }\n\n    var unwrap = wrapHistory([\"pushState\", \"replaceState\"])\n\n    addEventListener(\"pushstate\", handleLocationChange)\n    addEventListener(\"popstate\", handleLocationChange)\n\n    return function() {\n      removeEventListener(\"pushstate\", handleLocationChange)\n      removeEventListener(\"popstate\", handleLocationChange)\n      unwrap()\n    }\n  }\n}\n","/src/parseRoute.js":"function createMatch(isExact, path, url, params) {\n  return {\n    isExact: isExact,\n    path: path,\n    url: url,\n    params: params\n  }\n}\n\nfunction trimTrailingSlash(url) {\n  for (var len = url.length; \"/\" === url[--len]; );\n  return url.slice(0, len + 1)\n}\n\nfunction decodeParam(val) {\n  try {\n    return decodeURIComponent(val)\n  } catch (e) {\n    return val\n  }\n}\n\nexport function parseRoute(path, url, options) {\n  if (path === url || !path) {\n    return createMatch(path === url, path, url)\n  }\n\n  var exact = options && options.exact\n  var paths = trimTrailingSlash(path).split(\"/\")\n  var urls = trimTrailingSlash(url).split(\"/\")\n\n  if (paths.length > urls.length || (exact && paths.length < urls.length)) {\n    return\n  }\n\n  for (var i = 0, params = {}, len = paths.length, url = \"\"; i < len; i++) {\n    if (\":\" === paths[i][0]) {\n      params[paths[i].slice(1)] = urls[i] = decodeParam(urls[i])\n    } else if (paths[i] !== urls[i]) {\n      return\n    }\n    url += urls[i] + \"/\"\n  }\n\n  return createMatch(false, path, url.slice(0, -1), params)\n}\n"},"dependencies":{},"peerDependencies":{"hyperapp":"1.2.5"},"unresolved":{}}}}}